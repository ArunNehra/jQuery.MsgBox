/**************************************************************************************
 * jQuery MsgBox 0.6.0
 * by composite (ukjinplant@msn.com)
 * http://blog.hazard.kr
 * This project licensed under a MIT License.
 **************************************************************************************/;
(function(e){if(!window.console){window.console={};window.console.log=e.noop}var d="fixed",b="keypress",a="resize",c=function(f){return !f||f=="auto"};e.msgbox=function(i,h){h=e.extend({},e.msgbox.options,h);var k={},g="msgbox-",j=g+"ok",D=g+"no",s="password",l=h.css||{},o=!0,A=!1,w=("input" in h),u=!!h.confirm,F=function(f){setTimeout(function(){var p=e(document.activeElement),q=["."+g+"input","."+g+"button"];if(p.length&&(p.is(q[0])||p.is(q[1]))){console.log("good.")}else{B.find(q+"").eq(0).focus()}},0)},m=e(window),B=e("<div></div>").addClass(g+"ui").addClass(g+(w?"prompt":(u?"confirm":"alert"))).css(l.ui||{}),x=e("<div>&shy;</div>").addClass(g+"modal").css(l.modal||{}),n=e("<div></div>").addClass(g+"msg").css(l.msg||{}).html(i).appendTo(B),y=w?e("<div><input type='"+(h[s]?s:"text")+"'/></div>").addClass(g+"inbox").css(l.inbox||{}).children().addClass(g+"input").css(l.input||{}).bind("keydown",function(f){if((window.event?window.event.keyCode:f.which)==9&&f.shiftKey){f.preventDefault();B.find("."+g+"button").filter(":last").focus()}}).bind("blur",F).end().appendTo(B):null,C=e("<div></div>").addClass(g+"buttons").css(l.buttons||{}).appendTo(B),r=e("<button></button>").addClass(g+"button").css(l.button||{}).bind("keydown",function(G){if(this!=document.activeElement){return}G.stopPropagation();var q=window.event?window.event.keyCode:G.which,p=e(this),t,f=G.shiftKey;switch(q){case 9:case 39:G.preventDefault();if(t=p[q==9&&f?"prev":"next"]("button"),t.length){t.focus()}else{if(q==9){if(t=B.find("."+g+"input"),t.length){t.select()}else{if(t=p[f?"next":"prev"]("button"),t.length){t.focus()}}}}break;case 37:G.preventDefault();if(t=p.prev("button"),t.length){t.focus()}break;case 27:G.preventDefault();B.find("button."+(w||u?D:j)).trigger("click");break}}).bind("blur",F),v=[r.clone(o).addClass(j).text(u?h.yes:h.ok).appendTo(C),w||u?r.clone(o).addClass(D).text(h.no).appendTo(C):null];B.add(x).bind("keydown",function(){});if(w){h.confirm=o;if(typeof(h.input)=="string"){y.children().val(h.input)}}m.bind(a,k[a]=function(){if(!k.firstWidth){k.firstUnder=true;k.firstWidth=B.outerWidth();console.log(k.firstWidth)}var f=m.width()-20<=k.firstWidth;if(l.ui){if(f&&!k.isOver){console.log("OVER");k.isOver=true;B.css({width:"auto",left:"10px",right:"10px","margin-left":"0","margin-top":~~(-B.outerHeight()*0.32)+"px"})}else{if((!f&&k.isOver)||k.firstUnder){console.log("UNDER");k.firstUnder=false;k.isOver=false;B.css({width:k.firstWidth+"px",left:l.ui.left||"auto",right:l.ui.right||"auto","margin-left":~~(-k.firstWidth*0.5)+"px","margin-top":~~(-B.outerHeight()*0.32)+"px"})}}}});k.before=function(p){p.stopPropagation();var f=window.event?window.event.keyCode:p.which;if(p.target.type=="text"&&!f){B.find("button."+(w||u?D:j)).trigger("click");return A}switch(f){case 13:B.find("button."+j).trigger("click");return A;case 27:B.find("button."+(w||u?D:j)).trigger("click");return A}};var E="."+g+"ui,."+g+"modal",z=e(document.documentElement?document.documentElement:document.body).append(x).append(B).bind(b,k.before);k.after=function(f,p){for(var q=0,t=f.className.split(" ");q<t.length;q++){switch(t[q]){case j:switch(o){case w:h.submit.call(B[0],p);break;case u:h.submit.call(B[0],!!o);break;default:h.submit.call(B[0]);break}break;case D:if(w||!(w&&u)){h.submit.call(B[0])}else{h.submit.call(B[0],A)}break}}z.unbind(b,k.before);m.unbind(a,k[a])};B.delegate("button","click",function(f){B.add(x).remove();k.after(this,w?y.children().val():null)});setTimeout(function(){m.trigger(a)},0);if(w){B.find("input:text").select()}else{B.find("button:eq(0)").focus()}return B};e.extend(e.msgbox,{strings:{ok:"OK",yes:"OK",no:"Cancel"},css:{ui:{border:"1px solid black",font:"9pt verdana,gulim,sans-serif","background-color":"white",position:d,left:"50%",top:"32%",overflow:"hidden"},modal:{position:d,left:"0",top:"0",right:"0",bottom:"0","background-color":"black",opacity:".4"},msg:{padding:"2em 4em",overflow:"hidden","font-family":"verdana,gulim,sans-serif","white-space":"pre-wrap","word-wrap":"break-word"},buttons:{padding:"1em","background-color":"#eee","text-align":"right",overflow:"hidden"},button:{width:"72px",margin:"auto .25em"},inbox:{width:"90%",margin:"-2em auto 2em",border:"1px inset #3D7BAD"},input:{width:"99%",display:"block",border:"0"}}});e.msgbox.options={submit:function(){},confirm:false,css:e.msgbox.css,ok:e.msgbox.strings.ok,yes:e.msgbox.strings.yes,no:e.msgbox.strings.no};e.alert=function(f,g){return e.msgbox(f,{submit:g})};e.confirm=function(f,g){return e.msgbox(f,{confirm:true,submit:g})};e.prompt=function(i,h,j,g){var f=e.isFunction(h);return e.msgbox(i,{input:f?true:h,submit:f?h:j,password:f?j:g})}})(jQuery);